(function(e){function t(t){for(var s,i,o=t[0],c=t[1],u=t[2],d=0,p=[];d<o.length;d++)i=o[d],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&p.push(n[i][0]),n[i]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);l&&l(t);while(p.length)p.shift()();return a.push.apply(a,u||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],s=!0,o=1;o<r.length;o++){var c=r[o];0!==n[c]&&(s=!1)}s&&(a.splice(t--,1),e=i(i.s=r[0]))}return e}var s={},n={app:0},a=[];function i(t){if(s[t])return s[t].exports;var r=s[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=s,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(r,s,function(t){return e[t]}.bind(null,s));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=c;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"0aeb":function(e,t,r){},"0e46":function(e,t,r){},"138f":function(e,t,r){"use strict";var s=r("0e46"),n=r.n(s);n.a},"3bd3":function(e,t,r){"use strict";var s=r("0aeb"),n=r.n(s);n.a},4678:function(e,t,r){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(e){var t=a(e);return r(t)}function a(e){if(!r.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}n.keys=function(){return Object.keys(s)},n.resolve=a,e.exports=n,n.id="4678"},5465:function(e,t,r){},"565d":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var s=r("2b0e"),n=r("0a63"),a=r.n(n),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"h-screen",attrs:{id:"app"}},[r("f-nav"),r("router-view",{key:e.$route.fullPath})],1)},o=[],c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"py-3 mb-5 flex items-center  px-4",class:{" bg-transparent":e.user}},[r("h1",{staticClass:"cursor-pointer font-extrabold text-2xl",on:{click:function(t){return e.$router.push("/")}}},[r("span",{staticClass:" text-red-700"},[e._v("MyFlix")])]),e.user?r("div",{staticClass:"flex mx-4 -mb-1 items-center w-1/3"},[r("router-link",{staticClass:"hover:text-red-700 px-2 text-white font-semibold",attrs:{to:"/"}},[e._v(" Home ")]),r("router-link",{staticClass:"hover:text-red-700 px-2 text-white font-semibold",attrs:{to:"/recommendations"}},[e._v(" Recommendations ")]),r("router-link",{staticClass:"hover:text-red-700 px-2  text-white font-semibold",attrs:{to:"/favorites"}},[e._v(" My List ")])],1):e._e(),e.user?r("div",{staticClass:"flex w-1/2 mx-48 items-center"},[r("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],staticClass:"text-black form-input mx-10 focus:shadow-none focus:border-gray-700 border h-8 w-full border-gray-500",attrs:{type:"text",placeholder:"search"},domProps:{value:e.search},on:{input:function(t){t.target.composing||(e.search=t.target.value)}}})]):e._e(),e.user?r("nav-user-dropdown"):e._e(),e.user?e._e():r("div",{staticClass:" absolute mr-4 mt-2 right-0 pr-2 hover:text-red-700"},[["register","home"].includes(e.$route.name)?r("router-link",{staticClass:"cursor-pointer hover:bg-red-700 bg-orange-600 py-2 px-3 text-white font-semibold",attrs:{to:{path:"/login"}}},[e._v(" Sign in ")]):e._e(),["login"].includes(e.$route.name)?r("router-link",{staticClass:"cursor-pointer hover:bg-red-700 bg-orange-600 py-2 px-3 text-white font-semibold",attrs:{to:{path:"/register"}}},[e._v(" Sign Up ")]):e._e()],1)],1)},u=[],l=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"relative flex flex-col items-center cursor-pointer hover:text-red-700",class:{"text-black":e.dropdown},staticStyle:{"z-index":"1000"}},[r("a",{staticClass:"absolute w-40 -mt-3 right-0",on:{click:function(t){e.dropdown=!e.dropdown}}},[e._v(e._s("Welcome "+e.user.name))]),e.dropdown?r("button",{staticClass:"fixed inset-0 w-screen h-screen",attrs:{type:"button"},on:{click:function(t){e.dropdown=!1}}}):e._e(),e.dropdown?r("div",{staticClass:"absolute flex flex-col items-start overflow-hidden right-0 top-10 ml-10 mt-8 bg-gray-200 w-40 rounded-sm"},[r("router-link",{staticClass:"drop-link",attrs:{to:"/profile"}},[e._v(" Account ")]),r("router-link",{staticClass:"drop-link",attrs:{to:"/friends"}},[e._v(" Friends ")]),r("a",{staticClass:"drop-link",on:{click:function(t){return t.preventDefault(),e.signOut()}}},[e._v(" Sign Out ")])],1):e._e()])},d=[],p=(r("96cf"),r("1da1")),m=r("0330"),f=r.n(m),v=r("3390"),h=r.n(v),b=r("8af1"),g=r.n(b),x=r("bc3a"),_=r.n(x),w=f()(),y=h()();w.configure(y.axios(_.a)),w.configure(g()({storageKey:"auth"}));var j=w,C={name:"nav-dropdown",data:function(){return{dropdown:!1}},computed:{user:function(){return this.$store.state.auth.user}},methods:{signOut:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,j.logout();case 2:this.$store.commit("LOG_OUT");case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},k=C,$=(r("3bd3"),r("2877")),R=Object($["a"])(k,l,d,!1,null,"6d4192c0",null),O=R.exports,P={name:"f-nav",components:{NavUserDropdown:O},data:function(){return{search:""}},computed:{user:function(){return this.$store.state.auth.user}}},E=P,q=Object($["a"])(E,c,u,!1,null,"050157ec",null),T=q.exports,S={name:"App",components:{FNav:T}},z=S,I=(r("a5d2"),Object($["a"])(z,i,o,!1,null,null,null)),N=I.exports,V=(r("caad"),r("b0c0"),r("2532"),r("8c4f")),D=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.user?r("div",[e.incompletes.videos.length?r("div",{staticClass:"p-5"},[r("div",[r("h1",{staticClass:"font-bold text-2xl"},[e._v("Continue Watching")]),r("category-slide",{attrs:{category:e.incompletes}})],1)]):e._e(),null!=e.categories?r("div",{staticClass:"p-5"},e._l(e.categories,(function(e){return r("div",{key:e.title},[r("category-slide",{attrs:{category:e}})],1)})),0):e._e()]):r("div",{staticClass:"flex flex-col content-center items-center justify-end h-full"},[e._m(0),r("br"),r("div",{staticClass:"h-full "},[r("router-link",{staticClass:"cursor-pointer hover:bg-red-700 bg-orange-700 py-3 px-5 rounded-full text-white text-2xl",attrs:{to:{path:"/register"}}},[e._v("Try it now! ")])],1),r("div",{staticClass:" absolute right-1 buttom-1"},[e._v(" All contents in this webapp are taken from Youtube.com(videos) and Google.com(movie details). Habib ")])])},F=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"text-center font-semibold h-1/2 mt-16 centered text-4xl text-white block"},[e._v(" Unlimited movies to watch "),r("br"),e._v(" anywhere and anytime ")])}],U=(r("7db0"),r("d81d"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.category?r("div",[e.category.title?r("h1",{staticClass:"text-2xl font-bold"},[e._v(" "+e._s(e.category.title)+" ")]):e._e(),e.category.videos?r("carousel",{attrs:{"per-page":5,loop:!0}},e._l(e.category.videos,(function(t){return r("slide",{key:t.id,staticClass:"flex p-2",staticStyle:{height:"20em",cursor:"pointer"},on:{click:function(r){return r.preventDefault(),e.goToVideoPage(t.id)}}},[r("div",{staticClass:"relative w-full"},[r("img",{staticClass:"absolute w-full h-full",attrs:{src:e.url(t.poster_path)},on:{click:function(r){return r.preventDefault(),e.goToVideoPage(t.id)}}}),r("p",{staticClass:"p-2 absolute bottom-0 z-30 w-full",staticStyle:{background:"rgba(0,0,0, .6)"},on:{click:function(r){return r.preventDefault(),e.goToVideoPage(t.id)}}},[e._v(" "+e._s(t.title)+" ")])])])})),1):e._e()],1):e._e()}),M=[],X={name:"category-slide",props:{category:Object},methods:{url:function(e){return"/uploads/"+e},goToVideoPage:function(e){this.$router.push("/videos/".concat(e))}}},A=X,Y=Object($["a"])(A,U,M,!1,null,null,null),L=Y.exports,W={name:"home",components:{CategorySlide:L},created:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.fetchCategories();case 2:return e.next=4,this.fetchIncompletes();case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),data:function(){return{incompletes:{videos:[]},categories:null}},computed:{user:function(){return this.$store.state.auth.user}},methods:{fetchCategories:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,j.service("api/videos-ms/categories").find({query:{$homeCategories:!0}});case 2:this.categories=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),fetchIncompletes:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.service("api/watches-ms/incompletes").find({query:{user_id:this.user.id,$select:["video_id"]}});case 3:if(t=e.sent,r=t.data.map((function(e){var t=e.video_id;return t})),!(r.length>0)){e.next=9;break}return e.next=8,j.service("api/videos-ms/videos").find({query:{id:{$in:r}}});case 8:this.incompletes.videos=e.sent;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));function t(){return e.apply(this,arguments)}return t}()}},G=W,B=Object($["a"])(G,D,F,!1,null,null,null),K=B.exports,H=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"flex flex-col w-full items-center justify-center"},[e._m(0),r("form",{staticClass:"pb-6 h-full text-black w-1/3 flex flex-col"},[r("label",{staticClass:"block mt-2"},[r("span",{staticClass:"text-gray-700"},[e._v("name")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.name,expression:"user.name"}],staticClass:"form-input w-full",attrs:{placeholder:"your good name",id:"name"},domProps:{value:e.user.name},on:{input:function(t){t.target.composing||e.$set(e.user,"name",t.target.value)}}}),e.errors.name?r("div",{staticClass:"error-message",domProps:{textContent:e._s(e.errors.name[0])}}):e._e()]),r("label",{staticClass:"block mt-2"},[r("span",{staticClass:"text-gray-700"},[e._v("email")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"}],staticClass:"form-input w-full",attrs:{placeholder:"email address",id:"email"},domProps:{value:e.user.email},on:{input:function(t){t.target.composing||e.$set(e.user,"email",t.target.value)}}}),e.errors.email?r("div",{staticClass:"error-message",domProps:{textContent:e._s(e.errors.email[0])}}):e._e()]),r("label",{staticClass:"block mt-2"},[r("span",{staticClass:"text-gray-700"},[e._v("password")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],staticClass:"form-input w-full",attrs:{placeholder:"password",id:"password"},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}}),e.errors.password?r("div",{staticClass:"error-message",domProps:{textContent:e._s(e.errors.password[0])}}):e._e()]),r("label",{staticClass:"block mt-2"},[r("span",{staticClass:"text-gray-700"},[e._v("security question")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.security_question,expression:"user.security_question"}],staticClass:"form-input w-full",attrs:{placeholder:"add security question",id:"security_question"},domProps:{value:e.user.security_question},on:{input:function(t){t.target.composing||e.$set(e.user,"security_question",t.target.value)}}}),e.errors.security_question?r("div",{staticClass:"error-message",domProps:{textContent:e._s(e.errors.security_question[0])}}):e._e()]),r("label",{staticClass:"block mt-2"},[r("span",{staticClass:"text-gray-700"},[e._v("security answer")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.security_answer,expression:"user.security_answer"}],staticClass:"form-input w-full",attrs:{placeholder:"add security answer",id:"security_answer"},domProps:{value:e.user.security_answer},on:{input:function(t){t.target.composing||e.$set(e.user,"security_answer",t.target.value)}}}),e.errors.security_answer?r("div",{staticClass:"error-message",domProps:{textContent:e._s(e.errors.security_answer[0])}}):e._e()]),r("div",{staticClass:"flex flex-row justify-center"},[r("button",{staticClass:"mt-2 w-1/2 font-semibold content-center py-3 px-2 rounded-lg text-white hover:bg-red-700 bg-orange-700",on:{click:function(t){return t.preventDefault(),e.registerUser()}}},[e._v(" Continue to payment ")])])])])},J=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"flex flex-row items-center"},[r("h1",{staticClass:"font-bold text-2xl uppercase"},[e._v("Registration")])])}],Q={name:"Register",data:function(){return{errors:{},user:{name:"",email:"",password:"",security_question:"",security_answer:""}}},methods:{registerUser:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.service("api/users-ms/users").create(this.user);case 3:return t=e.sent,console.log(t),e.next=7,j.authenticate({strategy:"local",email:t.email,password:this.user.password});case 7:r=e.sent,this.$store.state.auth.user=r.user,this.$store.state.auth.token=r.accessToken,this.$router.push({path:"/subscribe",params:{id:t.id}}),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](0),this.errors=e.t0.data;case 16:case"end":return e.stop()}}),e,this,[[0,13]])})));function t(){return e.apply(this,arguments)}return t}()}},Z=Q,ee=(r("5b26"),Object($["a"])(Z,H,J,!1,null,null,null)),te=ee.exports,re=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"flex flex-col w-full items-center justify-center"},[e._m(0),r("form",{staticClass:"pb-6 h-full text-black w-1/3 flex flex-col"},[r("label",{staticClass:"block mt-2"},[r("span",{staticClass:"text-gray-700"},[e._v(" Card Number")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.card.number,expression:"card.number"}],staticClass:"form-input w-full",attrs:{type:"number",placeholder:"XXXX-XXXX-XXXX-XXXX",id:"name",maxlength:e.max},domProps:{value:e.card.number},on:{input:function(t){t.target.composing||e.$set(e.card,"number",t.target.value)}}}),e.errors.number?r("div",{staticClass:"error-message",domProps:{textContent:e._s(e.errors.number[0])}}):e._e()]),r("label",{staticClass:"block mt-2"},[r("span",{staticClass:"text-gray-700"},[e._v("Expiry Year")]),r("input",{directives:[{name:"model",rawName:"v-model.number",value:e.card.expiry_year,expression:"card.expiry_year",modifiers:{number:!0}}],staticClass:"form-input w-full",attrs:{placeholder:"Enter the expity year",id:"expiry_year"},domProps:{value:e.card.expiry_year},on:{input:function(t){t.target.composing||e.$set(e.card,"expiry_year",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),e.errors.expiry_year?r("div",{staticClass:"error-message",domProps:{textContent:e._s(e.errors.expiry_year[0])}}):e._e()]),r("label",{staticClass:"block mt-2"},[r("span",{staticClass:"text-gray-700"},[e._v("Expiry Month")]),r("input",{directives:[{name:"model",rawName:"v-model.number",value:e.card.expiry_month,expression:"card.expiry_month",modifiers:{number:!0}}],staticClass:"form-input w-full",attrs:{placeholder:"Enter the expiry month",id:"expiry_month"},domProps:{value:e.card.expiry_month},on:{input:function(t){t.target.composing||e.$set(e.card,"expiry_month",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),e.errors.expiry_month?r("div",{staticClass:"error-message",domProps:{textContent:e._s(e.errors.expiry_month[0])}}):e._e()]),r("label",{staticClass:"block mt-2"},[r("span",{staticClass:"text-gray-700"},[e._v("CVC")]),r("input",{directives:[{name:"model",rawName:"v-model.number",value:e.card.cvc,expression:"card.cvc",modifiers:{number:!0}}],staticClass:"form-input w-full",attrs:{placeholder:"Add the three digit CVC",id:"cvc"},domProps:{value:e.card.cvc},on:{input:function(t){t.target.composing||e.$set(e.card,"cvc",e._n(t.target.value))},blur:function(t){return e.$forceUpdate()}}}),e.errors.cvc?r("div",{staticClass:"error-message",domProps:{textContent:e._s(e.errors.cvc[0])}}):e._e()]),r("div",{staticClass:"flex flex-row justify-center"},[r("button",{staticClass:"mt-2 w-1/2 font-semibold content-center py-3 px-2 rounded-lg text-white hover:bg-red-700 bg-orange-700",on:{click:function(t){return t.preventDefault(),e.registerCard()}}},[e._v(" complete subscription ")])])])])},se=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"flex flex-row items-center"},[r("h1",{staticClass:"font-bold text-2xl uppercase"},[e._v("Subscription")])])}],ne={name:"Subscribe",data:function(){return{errors:{},card:{number:null,expiry_year:null,expiry_month:null,cvc:null}}},methods:{registerCard:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.card.user_id=this.$store.state.auth.user.id,e.next=4,j.service("api/payment-ms/cards").create(this.card);case 4:t=e.sent,this.$store.state.auth.user.subscription_expiry_date=t.subscription_expiry_date,this.$router.push({path:"/"}),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),this.errors=e.t0.data;case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(){return e.apply(this,arguments)}return t}()}},ae=ne,ie=(r("138f"),Object($["a"])(ae,re,se,!1,null,null,null)),oe=ie.exports,ce=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"flex text-black w-full justify-center"},[r("form",{staticClass:"h-full w-1/3 flex flex-col",on:{submit:function(t){return t.preventDefault(),e.loginUser()}}},[e._m(0),r("label",{staticClass:"block mt-2"},[r("span",{staticClass:"text-gray-700"},[e._v("email")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"}],staticClass:"form-input w-full",attrs:{required:"",type:"email",placeholder:"email address",id:"email"},domProps:{value:e.user.email},on:{input:function(t){t.target.composing||e.$set(e.user,"email",t.target.value)}}})]),r("label",{staticClass:"block mt-2"},[r("span",{staticClass:"text-gray-700"},[e._v("password")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],staticClass:"form-input w-full",attrs:{type:"password",required:"",placeholder:"password",id:"password"},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}})]),e.message?r("div",{staticClass:"error-message",domProps:{textContent:e._s(e.message)}}):e._e(),e._m(1)])])},ue=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"flex flex-row justify-center"},[r("h1",{staticClass:"text-2xl text-white uppercase content-center font-bold"},[e._v(" Sign in ")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"flex justify-between"},[r("button",{staticClass:"mt-2 w-1/2 inline-block font-semibold py-3 px-2 rounded-lg text-white hover:bg-red-700 bg-orange-700"},[e._v(" login ")])])}],le={name:"Login",data:function(){return{message:"",user:{email:"",password:""}}},methods:{loginUser:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.authenticate({strategy:"local",email:this.user.email,password:this.user.password});case 3:t=e.sent,this.$store.commit("SET_USER",t.user),this.$store.commit("SET_TOKEN",t.accessToken),this.$router.push({path:"/"}),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),this.message=e.t0.message;case 12:case"end":return e.stop()}}),e,this,[[0,9]])})));function t(){return e.apply(this,arguments)}return t}()}},de=le,pe=Object($["a"])(de,ce,ue,!1,null,null,null),me=pe.exports,fe=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"mt-10 flex flex-col bg-gray-900 text-white items-center"},[e._m(0),r("div",{staticClass:"mt-3 flex row justify-between w-1/3"},[r("span",[e._v("Name")]),r("span",[e._v(e._s(e.user.name))])]),r("hr",{staticClass:"my-3 w-1/3"}),r("div",{staticClass:"flex row justify-between w-1/3"},[r("span",[e._v("Email")]),r("span",[e._v(e._s(e.user.email))])]),r("div",{staticClass:"flex row justify-between w-1/3"},[r("span",[e._v("Subscribtion Expire Date")]),r("span",[e._v(e._s(e.format(e.user.subscription_expiry_date)))])])])},ve=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"flex w-1/3 justify-center items-center"},[r("h1",{staticClass:"uppercase font-bold text-2xl text-white"},[e._v("Profile")])])}],he=r("c1df"),be=r.n(he),ge={name:"Profile",created:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.fetchInfo();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),computed:{user:function(){return this.$store.state.auth.user}},methods:{format:function(e){return be.a.utc(e).format("DD-MM-YYYY")},fetchInfo:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,j.reAuthenticate();case 2:return t=e.sent,r=t.user,e.next=6,j.service("api/payment-ms/cards").find({user_id:r.id});case 6:s=e.sent,console.log(s),r.subscription_expiry_date=s.data[0].subscription_expiry_date,this.$store.commit("SET_USER",r);case 10:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},xe=ge,_e=Object($["a"])(xe,fe,ve,!1,null,"7a0de0ac",null),we=_e.exports,ye=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.video?r("div",{staticClass:"w-full px-5 py-2"},[r("h1",{staticClass:"font-bold text-2xl"},[e._v(e._s(e.video.title))]),e.video?r("div",{staticClass:"mt-3 flex justify-round"},[e.video.poster_url?r("video",{ref:"player",staticClass:"w-2/3 border",attrs:{poster:e.video.poster_url,controls:""}},[r("source",{attrs:{src:e.video.file_url,type:"video/mp4"}}),e._v(" Your browser does not support the video tag. ")]):e._e(),r("div",{staticClass:"flex-1 relative p-3"},[r("span",{staticClass:"mt-1 p-1 font-semibold block text-xl underline uppercase"},[e._v(e._s(e.video.category))]),r("span",{staticClass:"mt-3 px-1 text-gray-300 block"},[r("strong",[r("span",{staticClass:"uppercase"},[e._v("release date : ")]),e._v(e._s(e.format(e.video.publish_ts)))])]),r("br"),r("p",[e._v(e._s(e.video.description))]),r("div",{staticClass:"flex absolute text-black bottom-0 mt-10"},[r("like",{staticClass:"p-1 m-2 border rounded-lg hover:bg-gray-600",attrs:{"video-id":e.video.id}}),r("dislike",{staticClass:"p-1 m-2 border rounded-lg hover:bg-gray-600",attrs:{"video-id":e.video.id}}),r("favorite",{staticClass:"p-1 m-2 border rounded-lg hover:bg-gray-600",attrs:{"video-id":e.video.id}})],1)])]):e._e()]):e._e()},je=[],Ce=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:{"bg-green-200":e.rated},style:"cursor: "+(e.rated?"normal":"pointer"),on:{click:function(t){return e.rate()}}},[r("strong",{staticClass:"block text-black",staticStyle:{"text-align":"center"}},[e._v(" "+e._s(e.count>0?e.count:" ")+" ")]),r("svg",{staticClass:"h-5 w-5",attrs:{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"}},[r("path",{attrs:{d:"m0 1v8c0 .552246.447693 1 1 1h3v-10h-3c-.552307 0-1 .447693-1 1z",transform:"translate(0 5)"}}),r("path",{attrs:{d:"m9.15332 5.02979h-2.9541c-.258301 0-.387695-.172363-.431152-.246582-.043457-.0737305-.131348-.270508-.0063477-.496094l1.0415-1.87549c.228516-.410645.251953-.893555.0649414-1.32471-.187012-.43164-.556152-.744629-1.0127-.858398l-.734375-.183594c-.178711-.0449219-.368164.0122071-.492676.150391l-3.9873 4.42969c-.413574.460449-.641113 1.0542-.641113 1.67236v5.23242c0 1.37842 1.12158 2.5 2.5 2.5l4.97412-.0004883c1.12305 0 2.11475-.756348 2.41113-1.83887l1.06738-4.89844c.03125-.13623.0473633-.275879.0473633-.415527 0-1.01807-.828613-1.84668-1.84668-1.84668z",transform:"translate(5 .97)"}})])])},ke=[],$e={name:"rate",props:["videoId"],created:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,j.service("api/rates-ms/likes").find({query:{user_id:this.user.id,video_id:this.videoId,$limit:0}});case 2:return t=e.sent,this.rated=t.total>0,e.next=6,j.service("api/rates-ms/likes").find({query:{video_id:this.videoId,$limit:0}});case 6:t=e.sent,this.count=t.total;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),data:function(){return{count:0,rated:!1}},methods:{rate:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.rated){e.next=9;break}return e.prev=1,e.next=4,j.service("api/rates-ms/likes").create({video_id:this.videoId,user_id:this.user.id});case 4:this.rated=!0,e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](1);case 9:case"end":return e.stop()}}),e,this,[[1,7]])})));function t(){return e.apply(this,arguments)}return t}()},computed:{user:function(){return this.$store.state.auth.user}}},Re=$e,Oe=Object($["a"])(Re,Ce,ke,!1,null,null,null),Pe=Oe.exports,Ee=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:{"bg-red-200":e.rated},style:"cursor: "+(e.rated?"normal":"pointer"),on:{click:function(t){return e.rate()}}},[r("strong",{staticClass:"block text-black",staticStyle:{"text-align":"center"}},[e._v(" "+e._s(e.count>0?e.count:" ")+" ")]),r("svg",{staticClass:"h-5 w-5",attrs:{"enable-background":"new 0 0 24 24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"}},[r("path",{attrs:{d:"m22.25 1h-2.5c-.965 0-1.75.785-1.75 1.75v11.5c0 .965.785 1.75 1.75 1.75h2.5c.965 0 1.75-.785 1.75-1.75v-11.5c0-.965-.785-1.75-1.75-1.75z"}}),r("path",{attrs:{d:"m5.119.75c-1.95 0-3.61 1.4-3.94 3.32l-1.12 6.5c-.42 2.45 1.46 4.68 3.94 4.68h4.72s-.75 1.5-.75 4c0 3 2.25 4 3.25 4s1.5-.5 1.5-3c0-2.376 2.301-4.288 3.781-5.273v-12.388c-1.601-.741-4.806-1.839-9.781-1.839z"}})])])},qe=[],Te={name:"rate",props:["videoId"],created:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,j.service("api/rates-ms/dislikes").find({query:{user_id:this.user.id,video_id:this.videoId,$limit:0}});case 2:return t=e.sent,this.rated=t.total>0,e.next=6,j.service("api/rates-ms/dislikes").find({query:{video_id:this.videoId,$limit:0}});case 6:t=e.sent,this.count=t.total;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),data:function(){return{count:0,rated:!1}},methods:{rate:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.rated){e.next=9;break}return e.prev=1,e.next=4,j.service("api/rates-ms/dislikes").create({video_id:this.videoId,user_id:this.user.id});case 4:this.rated=!0,e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](1);case 9:case"end":return e.stop()}}),e,this,[[1,7]])})));function t(){return e.apply(this,arguments)}return t}()},computed:{user:function(){return this.$store.state.auth.user}}},Se=Te,ze=Object($["a"])(Se,Ee,qe,!1,null,null,null),Ie=ze.exports,Ne=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{class:{"bg-red-500":e.listed},style:"cursor: "+(e.listed?"normal":"pointer"),on:{click:function(t){return e.add()}}},[r("svg",{staticClass:"h-5 w-5 bg-blue",attrs:{viewBox:"0 -28 512.00002 512",xmlns:"http://www.w3.org/2000/svg"}},[r("path",{attrs:{d:"m471.382812 44.578125c-26.503906-28.746094-62.871093-44.578125-102.410156-44.578125-29.554687 0-56.621094 9.34375-80.449218 27.769531-12.023438 9.300781-22.917969 20.679688-32.523438 33.960938-9.601562-13.277344-20.5-24.660157-32.527344-33.960938-23.824218-18.425781-50.890625-27.769531-80.445312-27.769531-39.539063 0-75.910156 15.832031-102.414063 44.578125-26.1875 28.410156-40.613281 67.222656-40.613281 109.292969 0 43.300781 16.136719 82.9375 50.78125 124.742187 30.992188 37.394531 75.535156 75.355469 127.117188 119.3125 17.613281 15.011719 37.578124 32.027344 58.308593 50.152344 5.476563 4.796875 12.503907 7.4375 19.792969 7.4375 7.285156 0 14.316406-2.640625 19.785156-7.429687 20.730469-18.128907 40.707032-35.152344 58.328125-50.171876 51.574219-43.949218 96.117188-81.90625 127.109375-119.304687 34.644532-41.800781 50.777344-81.4375 50.777344-124.742187 0-42.066407-14.425781-80.878907-40.617188-109.289063zm0 0"}})])])},Ve=[],De={name:"favorite",props:["videoId"],created:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,j.service("api/watches-ms/favorites").find({query:{user_id:this.user.id,video_id:this.videoId,$limit:0}});case 2:t=e.sent,this.listed=t.total>0;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),data:function(){return{listed:!1}},methods:{add:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.listed){e.next=9;break}return e.prev=1,e.next=4,j.service("api/watches-ms/favorites").create({video_id:this.videoId,user_id:this.user.id});case 4:this.listed=!0,e.next=9;break;case 7:e.prev=7,e.t0=e["catch"](1);case 9:case"end":return e.stop()}}),e,this,[[1,7]])})));function t(){return e.apply(this,arguments)}return t}()},computed:{user:function(){return this.$store.state.auth.user}}},Fe=De,Ue=Object($["a"])(Fe,Ne,Ve,!1,null,null,null),Me=Ue.exports,Xe={mounted:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:setTimeout(Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log(t.$refs),console.log(t.$refs.player),t.player=t.$refs.player,!t.video){e.next=8;break}return t.trackWatch(),t.videoCompleted(),e.next=8,t.seekToCountinue();case 8:case"end":return e.stop()}}),e)}))),100);case 1:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),data:function(){return{player:null}},computed:{user:function(){return this.$store.state.auth.user}},methods:{seekToCountinue:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.service("api/watches-ms/incompletes").find({query:{user_id:this.user.id,video_id:this.video.id}});case 3:t=e.sent,this.player.currentTime=t.data[0].paused_at,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}(),videoCompleted:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.player.addEventListener("timeupdate",Object(p["a"])(regeneratorRuntime.mark((function e(){var r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:r=Math.floor(t.player.currentTime),s=Math.floor(t.player.duration),r===s&&setTimeout(Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.videoCompletedAPI();case 2:return e.next=4,t.addRecommendationAPI();case 4:case"end":return e.stop()}}),e)}))),100);case 3:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),videoCompletedAPI:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.service("api/watches-ms/incompletes").remove(null,{query:{user_id:this.user.id,video_id:this.video.id}});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e["catch"](0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(){return e.apply(this,arguments)}return t}(),addRecommendationAPI:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.service("api/recommendations-ms/recommendations").create({user:this.user,video:this.video});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e["catch"](0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,this,[[0,5]])})));function t(){return e.apply(this,arguments)}return t}(),trackWatch:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.player.addEventListener("timeupdate",Object(p["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(console.log(Math.floor(t.player.currentTime)),r=Math.floor(t.player.currentTime),r%20!=0||0==r){e.next=6;break}return console.log(t.player.currentTime),e.next=6,t.trackWatchAPI();case 6:case"end":return e.stop()}}),e)}))));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),trackWatchAPI:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.service("api/watches-ms/incompletes").find({query:{user_id:this.user.id,video_id:this.video.id,$limit:0}});case 3:if(t=e.sent,r=t.total,!(r>0)){e.next=10;break}return e.next=8,j.service("api/watches-ms/incompletes").patch(null,{paused_at:Math.floor(this.player.currentTime),user_id:this.user.id,video_id:this.video.id});case 8:e.next=12;break;case 10:return e.next=12,j.service("api/watches-ms/incompletes").create({paused_at:Math.floor(this.player.currentTime),user_id:this.user.id,video_id:this.video.id});case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,this,[[0,14]])})));function t(){return e.apply(this,arguments)}return t}()}},Ae={name:"Video",mixins:[Xe],components:{like:Pe,dislike:Ie,favorite:Me},beforeRouteEnter:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,r,s){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,j.service("api/videos-ms/videos").get(t.params.id);case 2:n=e.sent,s((function(e){return e.setVideoInfo(n)}));case 4:case"end":return e.stop()}}),e)})));function t(t,r,s){return e.apply(this,arguments)}return t}(),data:function(){return{video:null}},methods:{format:function(e){return be()(e).format("DD-MM-YYYY")},setVideoInfo:function(e){this.video=e,this.setUrls()},setUrls:function(){this.video.poster_url="/uploads/"+this.video.poster_path,this.video.file_url="/uploads/"+this.video.file_path}}},Ye=Ae,Le=Object($["a"])(Ye,ye,je,!1,null,null,null),We=Le.exports,Ge=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"flex flex-col w-full items-center justify-center"},[e._m(0),r("form",{staticClass:"pb-6 h-full text-black w-1/3 flex flex-col",on:{submit:function(t){return t.preventDefault(),e.registerVideo()}}},[r("label",{staticClass:"block mt-2"},[r("span",{staticClass:"text-gray-700"},[e._v("title")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.video.title,expression:"video.title"}],staticClass:"form-input w-full",attrs:{required:"",placeholder:"Video Title",id:"title"},domProps:{value:e.video.title},on:{input:function(t){t.target.composing||e.$set(e.video,"title",t.target.value)}}}),e.errors.title?r("div",{staticClass:"error-message",domProps:{textContent:e._s(e.errors.title[0])}}):e._e()]),r("label",{staticClass:"block mt-2"},[r("span",{staticClass:"text-gray-700"},[e._v("description")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.video.description,expression:"video.description"}],staticClass:"form-input w-full",attrs:{required:"",placeholder:"description",id:"description"},domProps:{value:e.video.description},on:{input:function(t){t.target.composing||e.$set(e.video,"description",t.target.value)}}}),e.errors.description?r("div",{staticClass:"error-message",domProps:{textContent:e._s(e.errors.description[0])}}):e._e()]),r("label",{staticClass:"block mt-2"},[r("span",{staticClass:"text-gray-700"},[e._v("category")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.video.category,expression:"video.category"}],staticClass:"form-input w-full",attrs:{required:"",placeholder:"category",id:"category"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.video,"category",t.target.multiple?r:r[0])}}},e._l(e.categories,(function(t){return r("option",{key:t.title,domProps:{value:t.title,textContent:e._s(t.title)}})})),0),e.errors.category?r("div",{staticClass:"error-message",domProps:{textContent:e._s(e.errors.category[0])}}):e._e()]),r("label",{staticClass:"block mt-2",attrs:{for:""}},[r("span",{staticClass:"text-gray-700"},[e._v("poster")]),r("input",{ref:"poster_file",staticClass:"form-input w-full bg-gray-900",attrs:{required:"",type:"file",placeholder:"poster",id:"poster_file"},on:{change:function(t){return e.setPosterFile()}}}),e.errors.poster_file?r("div",{staticClass:"error-message",domProps:{textContent:e._s(e.errors.poster_file[0])}}):e._e()]),r("label",{staticClass:"block mt-2",attrs:{for:""}},[r("span",{staticClass:"text-gray-700"},[e._v("file")]),r("input",{ref:"video_file",staticClass:"form-input bg-gray-900 w-full",attrs:{required:"",type:"file",placeholder:"file",id:"video_file"},on:{change:function(t){return e.setVideoFile()}}}),e.errors.video_file?r("div",{staticClass:"error-message",domProps:{textContent:e._s(e.errors.video_file[0])}}):e._e()]),r("label",{staticClass:"block mt-2",attrs:{for:""}},[r("span",{staticClass:"text-gray-700"},[e._v("publish date")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.video.publish_ts,expression:"video.publish_ts"}],staticClass:"form-input w-full",attrs:{required:"",placeholder:"publish date",id:"publish_ts",type:"date"},domProps:{value:e.video.publish_ts},on:{input:function(t){t.target.composing||e.$set(e.video,"publish_ts",t.target.value)}}}),e.errors.publish_ts?r("div",{staticClass:"error-message",domProps:{textContent:e._s(e.errors.publish_ts[0])}}):e._e()]),e._m(1)])])},Be=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"flex flex-row items-center"},[r("h1",{staticClass:"font-bold text-2xl uppercase"},[e._v("Video Registration")])])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"flex flex-row justify-center"},[r("button",{staticClass:"mt-2 w-1/2 font-semibold content-center py-3 px-2 rounded-lg text-white hover:bg-red-700 bg-orange-700"},[e._v(" Save ")])])}],Ke={name:"RegisterVideo",created:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,j.service("api/videos-ms/categories").find({query:{$pick:["title"]}});case 2:t=e.sent,this.categories=t;case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),data:function(){return{errors:[],categories:[],video:{title:null,category:null,video_file:null,poster_file:null,publish_ts:null,description:null}}},methods:{setPosterFile:function(){this.video.poster_file=this.$refs.poster_file.files[0],console.log(this.video.poster_file)},setVideoFile:function(){this.video.video_file=this.$refs.video_file.files[0],console.log(this.video.video_file)},registerVideo:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(r in t=new FormData,this.video)this.video.hasOwnProperty(r)&&t.set(r,this.video[r]);return e.prev=2,e.next=5,j.service("api/videos-ms/videos").create(t);case 5:s=e.sent,this.$router.push("/videos/".concat(s.id)),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](2),this.errors=e.t0.data;case 12:case"end":return e.stop()}}),e,this,[[2,9]])})));function t(){return e.apply(this,arguments)}return t}()}},He=Ke,Je=Object($["a"])(He,Ge,Be,!1,null,null,null),Qe=Je.exports,Ze=function(){var e=this,t=e.$createElement,r=e._self._c||t;return e.videos?r("div",{staticClass:"p-3"},[r("h1",{staticClass:"text-2xl"},[e._v("Favorites")]),r("div",{staticClass:"flex flex-wrap flex-row"},e._l(e.videos,(function(t){return r("div",{key:t.id,staticClass:"relative m-4 bg-red-300",staticStyle:{height:"15em",width:"12em",cursor:"pointer"}},[r("button",{staticClass:"z-10 px-2 pb-1 absolute inline-block top-0 right-0 border bg-gray-900 border-gray-500",on:{click:function(r){return e.removeIt(t.id)}}},[e._v(" x ")]),r("img",{staticClass:"static w-full h-full",attrs:{src:e.url(t.poster_path)},on:{click:function(r){return e.goToVideosPage(t.id)}}}),r("p",{staticClass:"absolute bottom-0 w-full py-2 text-center text-gray-200 font-semibold",staticStyle:{background:"rgba(0,0,0,.6)"},on:{click:function(r){return e.goToVideosPage(t.id)}}},[e._v(" "+e._s(t.title)+" ")])])})),0)]):e._e()},et=[],tt=(r("4de4"),{name:"Favorites",created:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,j.service("api/watches-ms/favorites").find({query:{user_id:this.user.id,$select:["video_id","visited_at"]}});case 2:if(t=e.sent,r=t.data.map((function(e){var t=e.video_id;return t})),!(r.length>0)){e.next=8;break}return e.next=7,j.service("api/videos-ms/videos").find({query:{id:{$in:r}}});case 7:this.videos=e.sent;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),data:function(){return{videos:[]}},computed:{user:function(){return this.$store.state.auth.user}},methods:{removeIt:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j.service("api/watches-ms/favorites").remove(null,{query:{user_id:this.user.id,video_id:t}});case 3:this.videos=this.videos.filter((function(e){return e.id!=t})),e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,this,[[0,6]])})));function t(t){return e.apply(this,arguments)}return t}(),url:function(e){return"/uploads/".concat(e)},goToVideosPage:function(e){this.$router.push("/videos/".concat(e))}}}),rt=tt,st=Object($["a"])(rt,Ze,et,!1,null,null,null),nt=st.exports,at=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"p-5 w-2/3"},[r("div",{staticClass:"register"},[r("h2",{staticClass:"font-bold text-2xl"},[e._v("Add Friend")]),r("input",{directives:[{name:"model",rawName:"v-model",value:e.other_user_email,expression:"other_user_email"}],staticClass:"mx-1 form-input text-gray-900",attrs:{type:"email",placeholder:"Enter Friend Email",required:""},domProps:{value:e.other_user_email},on:{input:function(t){t.target.composing||(e.other_user_email=t.target.value)}}}),r("button",{staticClass:"hover:bg-green-800 rounded-lg p-2 bg-green-600 text-white font-bold text-centered capitalize",attrs:{disabled:!e.other_user_email},on:{click:function(t){return t.preventDefault(),e.registerFriendship()}}},[e._v(" be friends ")])]),r("div",{staticClass:"flex flex-col overflow-wrap justify-btween mt-2 px-2 border bg-gray-800 w-full",staticStyle:{"min-height":"20em"}},[r("h2",{staticClass:"font-bold text-2xl"},[e._v("Friends")]),e._l(e.users,(function(t){return r("div",{key:t.id,staticClass:"relative p-2 my-3"},[r("span",{staticClass:"absolute font-semi-bold left-0"},[e._v(" "+e._s(t.name)+" ")]),r("button",{staticClass:"px-2 py-1 absolute right-0 bg-red-600 hover:bg-red-800 text-white",on:{click:function(r){return r.preventDefault(),e.removeFriendship(t.id)}}},[e._v(" x ")])])}))],2)])},it=[],ot={name:"Friends",created:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,j.service("api/recommendations-ms/friends").find({query:{user_id:this.$store.state.auth.user.id,paginate:!1}});case 2:this.users=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),data:function(){return{users:[],other_user_email:null}},methods:{registerFriendship:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=[],t.push(this.$store.state.auth.user),e.prev=2,e.next=5,j.service("api/users-ms/users").find({query:{email:this.other_user_email,$limit:1}});case 5:return r=e.sent,t.push(r.data[0]),e.next=9,j.service("api/recommendations-ms/friends").create({users:t});case 9:e.sent,window.location.reload(!0),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](2),console.log(e.t0);case 16:case"end":return e.stop()}}),e,this,[[2,13]])})));function t(){return e.apply(this,arguments)}return t}(),removeFriendship:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=[],r.push(this.$store.state.auth.user.id),r.push(t),e.prev=3,e.next=6,j.service("api/recommendations-ms/friends").remove(null,{query:{users:r}});case 6:e.sent,window.location.reload(!0),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](3),console.log(e.t0);case 13:case"end":return e.stop()}}),e,this,[[3,10]])})));function t(t){return e.apply(this,arguments)}return t}()}},ct=ot,ut=Object($["a"])(ct,at,it,!1,null,null,null),lt=ut.exports,dt=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"px-3"},[r("h2",{staticClass:"font-bold text-2xl"},[e._v("Recommendations")]),e.list.length?r("div",{staticClass:"mt-2 flex flex-row flex-wrap w-40"},e._l(e.list,(function(t){return r("div",{key:t.id,staticClass:"relative flex flex-col items-center justify-around",staticStyle:{cursor:"pointer"}},[r("img",{attrs:{src:t.poster_url,alt:t.title},on:{click:function(r){return e.goToVideoPage(t.id)}}}),r("strong",{on:{click:function(r){return e.goToVideoPage(t.id)}}},[e._v(e._s(t.title))])])})),0):e._e()])},pt=[],mt={name:"Recommendations",created:function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,j.service("api/recommendations-ms/recommendations").find({query:{user_id:this.$store.state.auth.user.id}});case 2:this.list=e.sent;case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),data:function(){return{list:[]}},methods:{goToVideoPage:function(e){this.$router.push("/videos/"+e)}}},ft=mt,vt=Object($["a"])(ft,dt,pt,!1,null,null,null),ht=vt.exports,bt=r("2f62"),gt=r("bfa9");s["a"].use(bt["a"]);var xt=new gt["a"]({key:"myflix",storage:window.localStorage}),_t=new bt["a"].Store({state:{auth:{user:null,token:null}},mutations:{SET_USER:function(e,t){e.auth.user=t},LOG_OUT:function(e){e.auth.user=null,e.auth.token=null,localStorage.setItem("auth","")},SET_TOKEN:function(e,t){e.auth.token=t}},plugins:[xt.plugin]});s["a"].use(V["a"]);var wt=[{path:"/",name:"home",component:K},{path:"/favorites",name:"favorites",component:nt},{path:"/videos/create",name:"video-register",component:Qe},{path:"/videos/:id",name:"video-details",component:We},{path:"/profile",name:"profile",component:we},{path:"/recommendations",name:"recommendations",component:ht},{path:"/friends",name:"friends",component:lt},{path:"/register",name:"register",component:te},{path:"/login",name:"login",component:me},{path:"/subscribe",name:"subscribe",component:oe}],yt=new V["a"]({routes:wt});yt.beforeEach(function(){var e=Object(p["a"])(regeneratorRuntime.mark((function e(t,r,s){var n,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=localStorage.getItem("auth"),a=["register","login","home"],a.includes(t.name)||n){e.next=4;break}return e.abrupt("return",s("/login"));case 4:if("login"!=t.name||!n){e.next=6;break}return e.abrupt("return",s("/"));case 6:if(!n){e.next=12;break}return e.next=9,j.reAuthenticate(!0);case 9:i=e.sent,_t.state.auth.user=i.user,_t.state.auth.token=i.accessToken;case 12:s();case 13:case"end":return e.stop()}}),e)})));return function(t,r,s){return e.apply(this,arguments)}}());var jt=yt;r("565d");s["a"].use(a.a),s["a"].config.productionTip=!1,new s["a"]({router:jt,store:_t,render:function(e){return e(N)}}).$mount("#app")},"5b26":function(e,t,r){"use strict";var s=r("f4ca"),n=r.n(s);n.a},a5d2:function(e,t,r){"use strict";var s=r("5465"),n=r.n(s);n.a},f4ca:function(e,t,r){}});
//# sourceMappingURL=app.bf77a44a.js.map